<!DOCTYPE html><html><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <meta charset="utf-8"/>
  <meta id="repository-name" content="github.com/crystal-lang/crystal"/>
  <link href="../../css/style.css" rel="stylesheet" type="text/css"/>
  
  <a class="dashingAutolink" name="autolink-2284"></a><a class="dashAnchor" name="//apple_ref/cpp/Class/HTTP%3A%3AMultipart%3A%3AParser%20-%20github.com%2Fcrystal-lang%2Fcrystal"></a><title>HTTP::Multipart::Parser - github.com/crystal-lang/crystal</title>
</head>
<body>



<div id="main-content">
<h1 class="type-name">

  <span class="kind">class</span> HTTP::Multipart::Parser

</h1>


  <ul class="superclass-hierarchy">
<li class="superclass"><a href="../../HTTP/Multipart/Parser.html">HTTP::Multipart::Parser</a></li>
<li class="superclass"><a href="../../Reference.html">Reference</a></li>
<li class="superclass"><a href="../../Object.html">Object</a></li>
</ul>




  <h2>Overview</h2>

  <p>Parses multipart MIME messages.</p>

<h3>Example</h3>

<pre><code>multipart <span class="o">=</span> <span class="s">&#34;--aA40\r\nContent-Type: text/plain\r\n\r\nbody\r\n--aA40--&#34;</span>
parser <span class="o">=</span> <span class="t">HTTP</span><span class="t">::</span><span class="t">Multipart</span><span class="t">::</span><span class="t">Parser</span>.<span class="k">new</span>(<span class="t">IO</span><span class="t">::</span><span class="t">Memory</span>.<span class="k">new</span>(multipart), <span class="s">&#34;aA40&#34;</span>)

<span class="k">while</span> parser.has_next?
  parser.<span class="k">next</span> <span class="k">do</span> <span class="o">|</span>headers, io<span class="o">|</span>
    headers[<span class="s">&#34;Content-Type&#34;</span>] <span class="c"># =&gt; &#34;text/plain&#34;</span>
    io.gets_to_end          <span class="c"># =&gt; &#34;body&#34;</span>
  <span class="k">end</span>
<span class="k">end</span></code></pre>

<p>Please note that the IO object yielded by <code><a href="../../HTTP/Multipart/Parser.html#next%28%26block%29-instance-method">#next</a></code> is only valid until the
block returns.</p>














  <h2>Defined in:</h2>
  
    
      <a href="https://github.com/crystal-lang/crystal/blob/c2c2276ec667171af5c2347490f49acdbdc4a3ca/src/http/multipart/parser.cr#L20" target="_blank">http/multipart/parser.cr</a>
    
    <br/>
  





  <h2>Class Method Summary</h2>
  <ul class="list-summary">
    
      <li class="entry-summary">
        <a href="#new%28io%3AIO%2Cboundary%3AString%29-class-method" class="signature"><strong>.new</strong>(io : IO, boundary : String)</a>
        
          <div class="summary"><p>Creates a new <code><a href="../../HTTP/Multipart/Parser.html">Multipart::Parser</a></code> which parses <em>io</em> with multipart boundary <em>boundary</em>.</p></div>
        
      </li>
    
  </ul>



  <h2>Instance Method Summary</h2>
  <ul class="list-summary">
    
      <li class="entry-summary">
        <a href="#has_next%3F-instance-method" class="signature"><strong>#has_next?</strong></a>
        
          <div class="summary"><p>True if <code><a href="../../HTTP/Multipart/Parser.html#next%28%26block%29-instance-method">#next</a></code> can be called legally.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#next%28%26block%29-instance-method" class="signature"><strong>#next</strong>(&amp;block)</a>
        
          <div class="summary"><p>Parses the next body part and yields headers as <code><a href="../../HTTP/Headers.html">HTTP::Headers</a></code> and the body text as an <code><a href="../../IO.html">IO</a></code>.</p></div>
        
      </li>
    
  </ul>





<div class="methods-inherited">
  
    

  <h3>Instance methods inherited from class <code><a href="../../Reference.html">Reference</a></code>
</h3>
  
  
    <a href="../../Reference.html#%3D%3D%28other%3Aself%29-instance-method" class="tooltip">
      <span>==(other : self)<br/>==(other)</span>
    ==</a>, 
    
  
    <a href="../../Reference.html#dup-instance-method" class="tooltip">
      <span>dup</span>
    dup</a>, 
    
  
    <a href="../../Reference.html#hash-instance-method" class="tooltip">
      <span>hash</span>
    hash</a>, 
    
  
    <a href="../../Reference.html#inspect%28io%3AIO%29%3ANil-instance-method" class="tooltip">
      <span>inspect(io : IO) : Nil</span>
    inspect</a>, 
    
  
    <a href="../../Reference.html#object_id%3AUInt64-instance-method" class="tooltip">
      <span>object_id : UInt64</span>
    object_id</a>, 
    
  
    <a href="../../Reference.html#pretty_print%28pp%29%3ANil-instance-method" class="tooltip">
      <span>pretty_print(pp) : Nil</span>
    pretty_print</a>, 
    
  
    <a href="../../Reference.html#same%3F%28other%3AReference%29-instance-method" class="tooltip">
      <span>same?(other : Reference)<br/>same?(other : Nil)</span>
    same?</a>, 
    
  
    <a href="../../Reference.html#to_s%28io%3AIO%29%3ANil-instance-method" class="tooltip">
      <span>to_s(io : IO) : Nil</span>
    to_s</a>
    
  


    

  <h3>Class methods inherited from class <code><a href="../../Reference.html">Reference</a></code>
</h3>
  
  
    <a href="../../Reference.html#new-class-method" class="tooltip">
      <span>new</span>
    new</a>
    
  


  
    

  <h3>Instance methods inherited from class <code><a href="../../Object.html">Object</a></code>
</h3>
  
  
    <a href="../../Object.html#%21%3D%28other%29-instance-method" class="tooltip">
      <span>!=(other)</span>
    !=</a>, 
    
  
    <a href="../../Object.html#%21~%28other%29-instance-method" class="tooltip">
      <span>!~(other)</span>
    !~</a>, 
    
  
    <a href="../../Object.html#%3D%3D%28other%29-instance-method" class="tooltip">
      <span>==(other)</span>
    ==</a>, 
    
  
    <a href="../../Object.html#%3D%3D%3D%28other%3AJSON%3A%3AAny%29-instance-method" class="tooltip">
      <span>===(other : JSON::Any)<br/>===(other : YAML::Any)<br/>===(other)</span>
    ===</a>, 
    
  
    <a href="../../Object.html#%3D~%28other%29-instance-method" class="tooltip">
      <span>=~(other)</span>
    =~</a>, 
    
  
    <a href="../../Object.html#class-instance-method" class="tooltip">
      <span>class</span>
    class</a>, 
    
  
    <a href="../../Object.html#dup-instance-method" class="tooltip">
      <span>dup</span>
    dup</a>, 
    
  
    <a href="../../Object.html#hash-instance-method" class="tooltip">
      <span>hash</span>
    hash</a>, 
    
  
    <a href="../../Object.html#inspect%28io%3AIO%29-instance-method" class="tooltip">
      <span>inspect(io : IO)<br/>inspect</span>
    inspect</a>, 
    
  
    <a href="../../Object.html#itself-instance-method" class="tooltip">
      <span>itself</span>
    itself</a>, 
    
  
    <a href="../../Object.html#not_nil%21-instance-method" class="tooltip">
      <span>not_nil!</span>
    not_nil!</a>, 
    
  
    <a href="../../Object.html#pretty_inspect%28width%3D79%2Cnewline%3D%26quot%3B%5Cn%26quot%3B%2Cindent%3D0%29%3AString-instance-method" class="tooltip">
      <span>pretty_inspect(width = <span class="n">79</span>, newline = <span class="s">&#34;\n&#34;</span>, indent = <span class="n">0</span>) : String</span>
    pretty_inspect</a>, 
    
  
    <a href="../../Object.html#pretty_print%28pp%3APrettyPrint%29%3ANil-instance-method" class="tooltip">
      <span>pretty_print(pp : PrettyPrint) : Nil</span>
    pretty_print</a>, 
    
  
    <a href="../../Object.html#tap%28%26block%29-instance-method" class="tooltip">
      <span>tap(&amp;block)</span>
    tap</a>, 
    
  
    <a href="../../Object.html#to_json%28io%3AIO%29-instance-method" class="tooltip">
      <span>to_json(io : IO)<br/>to_json</span>
    to_json</a>, 
    
  
    <a href="../../Object.html#to_pretty_json%28indent%3AString%3D%26quot%3B%26quot%3B%29-instance-method" class="tooltip">
      <span>to_pretty_json(indent : String = <span class="s">&#34;  &#34;</span>)<br/>to_pretty_json(io : IO, indent : String = <span class="s">&#34;  &#34;</span>)</span>
    to_pretty_json</a>, 
    
  
    <a href="../../Object.html#to_s-instance-method" class="tooltip">
      <span>to_s<br/>to_s(io : IO)</span>
    to_s</a>, 
    
  
    <a href="../../Object.html#to_yaml%28io%3AIO%29-instance-method" class="tooltip">
      <span>to_yaml(io : IO)<br/>to_yaml</span>
    to_yaml</a>, 
    
  
    <a href="../../Object.html#try%28%26block%29-instance-method" class="tooltip">
      <span>try(&amp;block)</span>
    try</a>
    
  


    

  <h3>Class methods inherited from class <code><a href="../../Object.html">Object</a></code>
</h3>
  
  
    <a href="../../Object.html#from_json%28string_or_io%2Croot%3AString%29%3Aself-class-method" class="tooltip">
      <span>from_json(string_or_io, root : String) : self<br/>from_json(string_or_io) : self</span>
    from_json</a>, 
    
  
    <a href="../../Object.html#from_yaml%28string_or_io%29%3Aself-class-method" class="tooltip">
      <span>from_yaml(string_or_io) : self</span>
    from_yaml</a>
    
  


  
</div>


  <h2>Class Method Detail</h2>
  
    <div class="entry-detail" id="new(io:IO,boundary:String)-class-method">
      <a class="dashingAutolink" name="autolink-2281"></a><a class="dashAnchor" name="//apple_ref/cpp/Method/def%20self.new%28io%20%3A%20IO%2C%20boundary%20%3A%20String%29"></a><div class="signature">
        
        def self.<strong>new</strong>(io : <a href="../../IO.html">IO</a>, boundary : <a href="../../String.html">String</a>)

        
      </div>
      
        <div class="doc"><p>Creates a new <code><a href="../../HTTP/Multipart/Parser.html">Multipart::Parser</a></code> which parses <em>io</em> with multipart
boundary <em>boundary</em>.</p></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/crystal-lang/crystal/blob/c2c2276ec667171af5c2347490f49acdbdc4a3ca/src/http/multipart/parser.cr#L23" target="_blank">View source</a>]
        
      </div>
    </div>
  



  <h2>Instance Method Detail</h2>
  
    <div class="entry-detail" id="has_next?-instance-method">
      <a class="dashingAutolink" name="autolink-2282"></a><a class="dashAnchor" name="//apple_ref/cpp/Method/def%20has_next%3F"></a><div class="signature">
        
        def <strong>has_next?</strong>

        
      </div>
      
        <div class="doc"><p>True if <code><a href="../../HTTP/Multipart/Parser.html#next%28%26block%29-instance-method">#next</a></code> can be called legally.</p></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/crystal-lang/crystal/blob/c2c2276ec667171af5c2347490f49acdbdc4a3ca/src/http/multipart/parser.cr#L78" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="next(&amp;block)-instance-method">
      <a class="dashingAutolink" name="autolink-2283"></a><a class="dashAnchor" name="//apple_ref/cpp/Method/def%20next%28%26block%29"></a><div class="signature">
        
        def <strong>next</strong>(&amp;block)

        
      </div>
      
        <div class="doc">
<p>Parses the next body part and yields headers as <code><a href="../../HTTP/Headers.html">HTTP::Headers</a></code> and the
body text as an <code><a href="../../IO.html">IO</a></code>.</p>

<p>This method yields once instead of returning the values, because the IO
object yielded to the block is only valid while the block is executing.
The IO object will be closed as soon as the block returns. To store the
content of the body part for longer than the block, the IO must be read
into memory.</p>

<pre><code>multipart <span class="o">=</span> <span class="s">&#34;--aA40\r\nContent-Type: text/plain\r\n\r\nbody\r\n--aA40--&#34;</span>
parser <span class="o">=</span> <span class="t">HTTP</span><span class="t">::</span><span class="t">Multipart</span><span class="t">::</span><span class="t">Parser</span>.<span class="k">new</span>(<span class="t">IO</span><span class="t">::</span><span class="t">Memory</span>.<span class="k">new</span>(multipart), <span class="s">&#34;aA40&#34;</span>)
parser.<span class="k">next</span> <span class="k">do</span> <span class="o">|</span>headers, io<span class="o">|</span>
  headers[<span class="s">&#34;Content-Type&#34;</span>] <span class="c"># =&gt; &#34;text/plain&#34;</span>
  io.gets_to_end          <span class="c"># =&gt; &#34;body&#34;</span>
<span class="k">end</span></code></pre>
</div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/crystal-lang/crystal/blob/c2c2276ec667171af5c2347490f49acdbdc4a3ca/src/http/multipart/parser.cr#L46" target="_blank">View source</a>]
        
      </div>
    </div>
  




</div>



</body></html>