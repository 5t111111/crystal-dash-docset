<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <meta charset="utf-8"/>
  <meta id="repository-name" content="github.com/crystal-lang/crystal"/>
  <link href="../css/style.css" rel="stylesheet" type="text/css"/>
  
  <a class="dashingAutolink" name="autolink-2640"></a><a class="dashAnchor" name="//apple_ref/cpp/Class/HTTP%3A%3AWebSocket%20-%20github.com%2Fcrystal-lang%2Fcrystal"></a><title>HTTP::WebSocket - github.com/crystal-lang/crystal</title>
</head>
<body>



<div id="main-content">
<h1 class="type-name">

  <span class="kind">class</span> HTTP::WebSocket

</h1>


  <ul class="superclass-hierarchy">
<li class="superclass"><a href="../HTTP/WebSocket.html">HTTP::WebSocket</a></li>
<li class="superclass"><a href="../Reference.html">Reference</a></li>
<li class="superclass"><a href="../Object.html">Object</a></li>
</ul>

















  <h2>Defined in:</h2>
  
    
      <a href="https://github.com/crystal-lang/crystal/blob/3c712288ba8f8138cb734e673cc622658300c229/src/http/web_socket.cr#L1" target="_blank">http/web_socket.cr</a>
    
    <br/>
  





  <h2>Class Method Summary</h2>
  <ul class="list-summary">
    
      <li class="entry-summary">
        <a href="#new%28host%3AString%2Cpath%3AString%2Cport%3Dnil%2Ctls%3Dfalse%29-class-method" class="signature"><strong>.new</strong>(host : String, path : String, port = <span class="n">nil</span>, tls = <span class="n">false</span>)</a>
        
          <div class="summary"><p>Opens a new websocket to the target host.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#new%28uri%3AURI%7CString%29-class-method" class="signature"><strong>.new</strong>(uri : URI | String)</a>
        
          <div class="summary"><p>Opens a new websocket using the information provided by the URI.</p></div>
        
      </li>
    
  </ul>



  <h2>Instance Method Summary</h2>
  <ul class="list-summary">
    
      <li class="entry-summary">
        <a href="#close%28message%3Dnil%29-instance-method" class="signature"><strong>#close</strong>(message = <span class="n">nil</span>)</a>
        
      </li>
    
      <li class="entry-summary">
        <a href="#closed%3F%3ABool-instance-method" class="signature"><strong>#closed?</strong> : Bool</a>
        
      </li>
    
      <li class="entry-summary">
        <a href="#on_binary%28%26on_binary%3ABytes-%3E%29-instance-method" class="signature"><strong>#on_binary</strong>(&amp;on_binary : Bytes -&gt; )</a>
        
      </li>
    
      <li class="entry-summary">
        <a href="#on_close%28%26on_close%3AString-%3E%29-instance-method" class="signature"><strong>#on_close</strong>(&amp;on_close : String -&gt; )</a>
        
      </li>
    
      <li class="entry-summary">
        <a href="#on_message%28%26on_message%3AString-%3E%29-instance-method" class="signature"><strong>#on_message</strong>(&amp;on_message : String -&gt; )</a>
        
      </li>
    
      <li class="entry-summary">
        <a href="#on_ping%28%26on_ping%3AString-%3E%29-instance-method" class="signature"><strong>#on_ping</strong>(&amp;on_ping : String -&gt; )</a>
        
      </li>
    
      <li class="entry-summary">
        <a href="#on_pong%28%26on_pong%3AString-%3E%29-instance-method" class="signature"><strong>#on_pong</strong>(&amp;on_pong : String -&gt; )</a>
        
      </li>
    
      <li class="entry-summary">
        <a href="#ping%28message%3Dnil%29-instance-method" class="signature"><strong>#ping</strong>(message = <span class="n">nil</span>)</a>
        
          <div class="summary"><p>It&#39;s possible to send a PING frame, which the client must respond to with a PONG, or the server can send an unsolicited PONG frame which the client should not respond to.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#pong%28message%3Dnil%29-instance-method" class="signature"><strong>#pong</strong>(message = <span class="n">nil</span>)</a>
        
          <div class="summary"><p>Server can send an unsolicited PONG frame which the client should not respond to.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#run-instance-method" class="signature"><strong>#run</strong></a>
        
      </li>
    
      <li class="entry-summary">
        <a href="#send%28message%29-instance-method" class="signature"><strong>#send</strong>(message)</a>
        
      </li>
    
      <li class="entry-summary">
        <a href="#stream%28binary%3Dtrue%2Cframe_size%3D1024%2C%26block%29-instance-method" class="signature"><strong>#stream</strong>(binary = <span class="n">true</span>, frame_size = <span class="n">1024</span>, &amp;block)</a>
        
      </li>
    
  </ul>





<div class="methods-inherited">
  
    

  <h3>Instance methods inherited from class <code><a href="../Reference.html">Reference</a></code>
</h3>
  
  
    <a href="../Reference.html#%3D%3D%28other%3Aself%29-instance-method" class="tooltip">
      <span>==(other : self)<br/>==(other)</span>
    ==</a>, 
    
  
    <a href="../Reference.html#dup-instance-method" class="tooltip">
      <span>dup</span>
    dup</a>, 
    
  
    <a href="../Reference.html#hash-instance-method" class="tooltip">
      <span>hash</span>
    hash</a>, 
    
  
    <a href="../Reference.html#inspect%28io%3AIO%29%3ANil-instance-method" class="tooltip">
      <span>inspect(io : IO) : Nil</span>
    inspect</a>, 
    
  
    <a href="../Reference.html#object_id%3AUInt64-instance-method" class="tooltip">
      <span>object_id : UInt64</span>
    object_id</a>, 
    
  
    <a href="../Reference.html#pretty_print%28pp%29%3ANil-instance-method" class="tooltip">
      <span>pretty_print(pp) : Nil</span>
    pretty_print</a>, 
    
  
    <a href="../Reference.html#same%3F%28other%3AReference%29-instance-method" class="tooltip">
      <span>same?(other : Reference)<br/>same?(other : Nil)</span>
    same?</a>, 
    
  
    <a href="../Reference.html#to_s%28io%3AIO%29%3ANil-instance-method" class="tooltip">
      <span>to_s(io : IO) : Nil</span>
    to_s</a>
    
  


    

  <h3>Class methods inherited from class <code><a href="../Reference.html">Reference</a></code>
</h3>
  
  
    <a href="../Reference.html#new-class-method" class="tooltip">
      <span>new</span>
    new</a>
    
  


  
    

  <h3>Instance methods inherited from class <code><a href="../Object.html">Object</a></code>
</h3>
  
  
    <a href="../Object.html#%21%3D%28other%29-instance-method" class="tooltip">
      <span>!=(other)</span>
    !=</a>, 
    
  
    <a href="../Object.html#%21~%28other%29-instance-method" class="tooltip">
      <span>!~(other)</span>
    !~</a>, 
    
  
    <a href="../Object.html#%3D%3D%28other%29-instance-method" class="tooltip">
      <span>==(other)</span>
    ==</a>, 
    
  
    <a href="../Object.html#%3D%3D%3D%28other%3AJSON%3A%3AAny%29-instance-method" class="tooltip">
      <span>===(other : JSON::Any)<br/>===(other : YAML::Any)<br/>===(other)</span>
    ===</a>, 
    
  
    <a href="../Object.html#%3D~%28other%29-instance-method" class="tooltip">
      <span>=~(other)</span>
    =~</a>, 
    
  
    <a href="../Object.html#class-instance-method" class="tooltip">
      <span>class</span>
    class</a>, 
    
  
    <a href="../Object.html#dup-instance-method" class="tooltip">
      <span>dup</span>
    dup</a>, 
    
  
    <a href="../Object.html#hash-instance-method" class="tooltip">
      <span>hash</span>
    hash</a>, 
    
  
    <a href="../Object.html#inspect%28io%3AIO%29-instance-method" class="tooltip">
      <span>inspect(io : IO)<br/>inspect</span>
    inspect</a>, 
    
  
    <a href="../Object.html#itself-instance-method" class="tooltip">
      <span>itself</span>
    itself</a>, 
    
  
    <a href="../Object.html#not_nil%21-instance-method" class="tooltip">
      <span>not_nil!</span>
    not_nil!</a>, 
    
  
    <a href="../Object.html#pretty_inspect%28width%3D79%2Cnewline%3D%26quot%3B%5Cn%26quot%3B%2Cindent%3D0%29%3AString-instance-method" class="tooltip">
      <span>pretty_inspect(width = <span class="n">79</span>, newline = <span class="s">&#34;\n&#34;</span>, indent = <span class="n">0</span>) : String</span>
    pretty_inspect</a>, 
    
  
    <a href="../Object.html#pretty_print%28pp%3APrettyPrint%29%3ANil-instance-method" class="tooltip">
      <span>pretty_print(pp : PrettyPrint) : Nil</span>
    pretty_print</a>, 
    
  
    <a href="../Object.html#tap%28%26block%29-instance-method" class="tooltip">
      <span>tap(&amp;block)</span>
    tap</a>, 
    
  
    <a href="../Object.html#to_json%28io%3AIO%29-instance-method" class="tooltip">
      <span>to_json(io : IO)<br/>to_json</span>
    to_json</a>, 
    
  
    <a href="../Object.html#to_pretty_json%28indent%3AString%3D%26quot%3B%26quot%3B%29-instance-method" class="tooltip">
      <span>to_pretty_json(indent : String = <span class="s">&#34;  &#34;</span>)<br/>to_pretty_json(io : IO, indent : String = <span class="s">&#34;  &#34;</span>)</span>
    to_pretty_json</a>, 
    
  
    <a href="../Object.html#to_s-instance-method" class="tooltip">
      <span>to_s<br/>to_s(io : IO)</span>
    to_s</a>, 
    
  
    <a href="../Object.html#to_yaml%28io%3AIO%29-instance-method" class="tooltip">
      <span>to_yaml(io : IO)<br/>to_yaml</span>
    to_yaml</a>, 
    
  
    <a href="../Object.html#try%28%26block%29-instance-method" class="tooltip">
      <span>try(&amp;block)</span>
    try</a>
    
  


    

  <h3>Class methods inherited from class <code><a href="../Object.html">Object</a></code>
</h3>
  
  
    <a href="../Object.html#from_json%28string_or_io%2Croot%3AString%29%3Aself-class-method" class="tooltip">
      <span>from_json(string_or_io, root : String) : self<br/>from_json(string_or_io) : self</span>
    from_json</a>, 
    
  
    <a href="../Object.html#from_yaml%28string_or_io%29%3Aself-class-method" class="tooltip">
      <span>from_yaml(string_or_io) : self</span>
    from_yaml</a>
    
  


  
</div>


  <h2>Class Method Detail</h2>
  
    <div class="entry-detail" id="new(host:String,path:String,port=nil,tls=false)-class-method">
      <a class="dashingAutolink" name="autolink-2626"></a><a class="dashAnchor" name="//apple_ref/cpp/Method/def%20self.new%28host%20%3A%20String%2C%20path%20%3A%20String%2C%20port%20%3D%20nil%2C%20tls%20%3D%20false%29"></a><div class="signature">
        
        def self.<strong>new</strong>(host : <a href="../String.html">String</a>, path : <a href="../String.html">String</a>, port = <span class="n">nil</span>, tls = <span class="n">false</span>)

        
      </div>
      
        <div class="doc">
<p>Opens a new websocket to the target host. This will also handle the handshake
and will raise an exception if the handshake did not complete successfully.</p>

<pre><code><span class="t">HTTP</span><span class="t">::</span><span class="t">WebSocket</span>.<span class="k">new</span>(<span class="s">&#34;websocket.example.com&#34;</span>, <span class="s">&#34;/chat&#34;</span>)            <span class="c"># Creates a new WebSocket to `websocket.example.com`</span>
<span class="t">HTTP</span><span class="t">::</span><span class="t">WebSocket</span>.<span class="k">new</span>(<span class="s">&#34;websocket.example.com&#34;</span>, <span class="s">&#34;/chat&#34;</span>, tls: <span class="n">true</span>) <span class="c"># Creates a new WebSocket with TLS to `·∫Åebsocket.example.com`</span></code></pre>
</div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/crystal-lang/crystal/blob/3c712288ba8f8138cb734e673cc622658300c229/src/http/web_socket.cr#L38" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="new(uri:URI|String)-class-method">
      <a class="dashingAutolink" name="autolink-2627"></a><a class="dashAnchor" name="//apple_ref/cpp/Method/def%20self.new%28uri%20%3A%20URI%20%7C%20String%29"></a><div class="signature">
        
        def self.<strong>new</strong>(uri : <a href="../URI.html">URI</a> | <a href="../String.html">String</a>)

        
      </div>
      
        <div class="doc">
<p>Opens a new websocket using the information provided by the URI. This will also handle the handshake
and will raise an exception if the handshake did not complete successfully. This method will also raise
an exception if the URI is missing the host and/or the path.</p>

<p>Please note that the scheme will only be used to identify if TLS should be used or not. Therefore, schemes
apart from <code>wss</code> and <code>https</code> will be treated as the default which is <code>ws</code>.</p>

<pre><code><span class="t">HTTP</span><span class="t">::</span><span class="t">WebSocket</span>.<span class="k">new</span>(<span class="t">URI</span>.parse(<span class="s">&#34;ws://websocket.example.com/chat&#34;</span>))        <span class="c"># Creates a new WebSocket to `websocket.example.com`</span>
<span class="t">HTTP</span><span class="t">::</span><span class="t">WebSocket</span>.<span class="k">new</span>(<span class="t">URI</span>.parse(<span class="s">&#34;wss://websocket.example.com/chat&#34;</span>))       <span class="c"># Creates a new WebSocket with TLS to `websocket.example.com`</span>
<span class="t">HTTP</span><span class="t">::</span><span class="t">WebSocket</span>.<span class="k">new</span>(<span class="t">URI</span>.parse(<span class="s">&#34;http://websocket.example.com:8080/chat&#34;</span>)) <span class="c"># Creates a new WebSocket to `websocket.example.com` on port `8080`</span></code></pre>
</div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/crystal-lang/crystal/blob/3c712288ba8f8138cb734e673cc622658300c229/src/http/web_socket.cr#L27" target="_blank">View source</a>]
        
      </div>
    </div>
  



  <h2>Instance Method Detail</h2>
  
    <div class="entry-detail" id="close(message=nil)-instance-method">
      <a class="dashingAutolink" name="autolink-2628"></a><a class="dashAnchor" name="//apple_ref/cpp/Method/def%20close%28message%20%3D%20nil%29"></a><div class="signature">
        
        def <strong>close</strong>(message = <span class="n">nil</span>)

        
      </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/crystal-lang/crystal/blob/3c712288ba8f8138cb734e673cc622658300c229/src/http/web_socket.cr#L91" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="closed?:Bool-instance-method">
      <a class="dashingAutolink" name="autolink-2629"></a><a class="dashAnchor" name="//apple_ref/cpp/Method/def%20closed%3F%20%3A%20Bool"></a><div class="signature">
        
        def <strong>closed?</strong> : <a href="../Bool.html">Bool</a>

        
      </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/crystal-lang/crystal/blob/3c712288ba8f8138cb734e673cc622658300c229/src/http/web_socket.cr#L2" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="on_binary(&amp;on_binary:Bytes-&gt;)-instance-method">
      <a class="dashingAutolink" name="autolink-2630"></a><a class="dashAnchor" name="//apple_ref/cpp/Method/def%20on_binary%28%26on_binary%20%3A%20Bytes%20-%3E%20%29"></a><div class="signature">
        
        def <strong>on_binary</strong>(&amp;on_binary : <a href="../Bytes.html">Bytes</a> -&gt; )

        
      </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/crystal-lang/crystal/blob/3c712288ba8f8138cb734e673cc622658300c229/src/http/web_socket.cr#L51" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="on_close(&amp;on_close:String-&gt;)-instance-method">
      <a class="dashingAutolink" name="autolink-2631"></a><a class="dashAnchor" name="//apple_ref/cpp/Method/def%20on_close%28%26on_close%20%3A%20String%20-%3E%20%29"></a><div class="signature">
        
        def <strong>on_close</strong>(&amp;on_close : <a href="../String.html">String</a> -&gt; )

        
      </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/crystal-lang/crystal/blob/3c712288ba8f8138cb734e673cc622658300c229/src/http/web_socket.cr#L54" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="on_message(&amp;on_message:String-&gt;)-instance-method">
      <a class="dashingAutolink" name="autolink-2632"></a><a class="dashAnchor" name="//apple_ref/cpp/Method/def%20on_message%28%26on_message%20%3A%20String%20-%3E%20%29"></a><div class="signature">
        
        def <strong>on_message</strong>(&amp;on_message : <a href="../String.html">String</a> -&gt; )

        
      </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/crystal-lang/crystal/blob/3c712288ba8f8138cb734e673cc622658300c229/src/http/web_socket.cr#L48" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="on_ping(&amp;on_ping:String-&gt;)-instance-method">
      <a class="dashingAutolink" name="autolink-2633"></a><a class="dashAnchor" name="//apple_ref/cpp/Method/def%20on_ping%28%26on_ping%20%3A%20String%20-%3E%20%29"></a><div class="signature">
        
        def <strong>on_ping</strong>(&amp;on_ping : <a href="../String.html">String</a> -&gt; )

        
      </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/crystal-lang/crystal/blob/3c712288ba8f8138cb734e673cc622658300c229/src/http/web_socket.cr#L42" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="on_pong(&amp;on_pong:String-&gt;)-instance-method">
      <a class="dashingAutolink" name="autolink-2634"></a><a class="dashAnchor" name="//apple_ref/cpp/Method/def%20on_pong%28%26on_pong%20%3A%20String%20-%3E%20%29"></a><div class="signature">
        
        def <strong>on_pong</strong>(&amp;on_pong : <a href="../String.html">String</a> -&gt; )

        
      </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/crystal-lang/crystal/blob/3c712288ba8f8138cb734e673cc622658300c229/src/http/web_socket.cr#L45" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="ping(message=nil)-instance-method">
      <a class="dashingAutolink" name="autolink-2635"></a><a class="dashAnchor" name="//apple_ref/cpp/Method/def%20ping%28message%20%3D%20nil%29"></a><div class="signature">
        
        def <strong>ping</strong>(message = <span class="n">nil</span>)

        
      </div>
      
        <div class="doc">
<p>It&#39;s possible to send a PING frame, which the client must respond to
with a PONG, or the server can send an unsolicited PONG frame
which the client should not respond to.</p>

<p>See <code><a href="../HTTP/WebSocket.html#pong%28message%3Dnil%29-instance-method">#pong</a></code>.</p>
</div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/crystal-lang/crystal/blob/3c712288ba8f8138cb734e673cc622658300c229/src/http/web_socket.cr#L71" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="pong(message=nil)-instance-method">
      <a class="dashingAutolink" name="autolink-2636"></a><a class="dashAnchor" name="//apple_ref/cpp/Method/def%20pong%28message%20%3D%20nil%29"></a><div class="signature">
        
        def <strong>pong</strong>(message = <span class="n">nil</span>)

        
      </div>
      
        <div class="doc">
<p>Server can send an unsolicited PONG frame which the client should not respond to.</p>

<p>See <code><a href="../HTTP/WebSocket.html#ping%28message%3Dnil%29-instance-method">#ping</a></code>.</p>
</div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/crystal-lang/crystal/blob/3c712288ba8f8138cb734e673cc622658300c229/src/http/web_socket.cr#L79" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="run-instance-method">
      <a class="dashingAutolink" name="autolink-2637"></a><a class="dashAnchor" name="//apple_ref/cpp/Method/def%20run"></a><div class="signature">
        
        def <strong>run</strong>

        
      </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/crystal-lang/crystal/blob/3c712288ba8f8138cb734e673cc622658300c229/src/http/web_socket.cr#L97" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="send(message)-instance-method">
      <a class="dashingAutolink" name="autolink-2638"></a><a class="dashAnchor" name="//apple_ref/cpp/Method/def%20send%28message%29"></a><div class="signature">
        
        def <strong>send</strong>(message)

        
      </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/crystal-lang/crystal/blob/3c712288ba8f8138cb734e673cc622658300c229/src/http/web_socket.cr#L61" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="stream(binary=true,frame_size=1024,&amp;block)-instance-method">
      <a class="dashingAutolink" name="autolink-2639"></a><a class="dashAnchor" name="//apple_ref/cpp/Method/def%20stream%28binary%20%3D%20true%2C%20frame_size%20%3D%201024%2C%20%26block%29"></a><div class="signature">
        
        def <strong>stream</strong>(binary = <span class="n">true</span>, frame_size = <span class="n">1024</span>, &amp;block)

        
      </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/crystal-lang/crystal/blob/3c712288ba8f8138cb734e673cc622658300c229/src/http/web_socket.cr#L84" target="_blank">View source</a>]
        
      </div>
    </div>
  




</div>



</body></html>