<!DOCTYPE html><html><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <meta charset="utf-8"/>
  <meta id="repository-name" content="github.com/manastech/crystal"/>
  <link href="../css/style.css" rel="stylesheet" type="text/css"/>
  
  <a class="dashingAutolink" name="autolink-1460"></a><a class="dashAnchor" name="//apple_ref/cpp/Class/HTTP%3A%3AWebSocket"></a><title>HTTP::WebSocket</title>
</head>
<body>



<div id="main-content">
<h1 class="type-name">

  <span class="kind">class</span> HTTP::WebSocket

</h1>


  <ul class="superclass-hierarchy">
<li class="superclass"><a href="../HTTP/WebSocket.html">HTTP::WebSocket</a></li>
<li class="superclass"><a href="../Reference.html">Reference</a></li>
<li class="superclass"><a href="../Object.html">Object</a></li>
</ul>

















  <h2>Defined in:</h2>
  
    
      <a href="https://github.com/manastech/crystal/blob/f364e3ec252a7384e401b1d3b4b04e21d469a91f/src/http/web_socket.cr" target="_blank">http/web_socket.cr</a>
    
    <br/>
  



  
    <h2>Constant Summary</h2>
  
  <dl>
    
      <dt class="entry-const">
        <strong>MASK_BIT</strong> = <code><span class="n">128_u8</span></code>
      </dt>
      
    
      <dt class="entry-const">
        <strong>VERSION</strong> = <code><span class="n">13</span></code>
      </dt>
      
    
  </dl>



  <h2>Class Method Summary</h2>
  <ul class="list-summary">
    
      <li class="entry-summary">
        <a href="#open%28uri%3AURI%7CString%29-class-method" class="signature"><strong>.open</strong>(uri : URI | String)</a>
        
          <div class="summary"><p>Opens a new websocket using the information provided by the URI.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#open%28host%2Cpath%2Cport%3D%3Cspanclass%3D%22n%22%3Enil%3C%2Fspan%3E%2Cssl%3D%3Cspanclass%3D%22n%22%3Efalse%3C%2Fspan%3E%29-class-method" class="signature"><strong>.open</strong>(host, path, port = <span class="n">nil</span>, ssl = <span class="n">false</span>)</a>
        
          <div class="summary"><p>Opens a new websocket to the target host.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#new%28io%29-class-method" class="signature"><strong>.new</strong>(io)</a>
        
      </li>
    
  </ul>



  <h2>Instance Method Summary</h2>
  <ul class="list-summary">
    
      <li class="entry-summary">
        <a href="#close-instance-method" class="signature"><strong>#close</strong></a>
        
      </li>
    
      <li class="entry-summary">
        <a href="#receive%28buffer%3ASlice%28UInt8%29%29-instance-method" class="signature"><strong>#receive</strong>(buffer : Slice(UInt8))</a>
        
      </li>
    
      <li class="entry-summary">
        <a href="#send%28data%3ASlice%28UInt8%29%2Cmasked%3D%3Cspanclass%3D%22n%22%3Efalse%3C%2Fspan%3E%29-instance-method" class="signature"><strong>#send</strong>(data : Slice(UInt8), masked = <span class="n">false</span>)</a>
        
      </li>
    
      <li class="entry-summary">
        <a href="#send%28data%3AString%2Cmasked%3D%3Cspanclass%3D%22n%22%3Efalse%3C%2Fspan%3E%29-instance-method" class="signature"><strong>#send</strong>(data : String, masked = <span class="n">false</span>)</a>
        
      </li>
    
      <li class="entry-summary">
        <a href="#send%28data%3ASlice%28UInt8%29%2Copcode%3AOpcode%2Cmasked%3D%3Cspanclass%3D%22n%22%3Efalse%3C%2Fspan%3E%2Cflags%3D%3Cspanclass%3D%22t%22%3EFlags%3C%2Fspan%3E%3Cspanclass%3D%22t%22%3E%3A%3A%3C%2Fspan%3E%3Cspanclass%3D%22t%22%3EFINAL%3C%2Fspan%3E%2Cflush%3D%3Cspanclass%3D%22n%22%3Etrue%3C%2Fspan%3E%29-instance-method" class="signature"><strong>#send</strong>(data : Slice(UInt8), opcode : Opcode, masked = <span class="n">false</span>, flags = <span class="t">Flags</span><span class="t">::</span><span class="t">FINAL</span>, flush = <span class="n">true</span>)</a>
        
      </li>
    
      <li class="entry-summary">
        <a href="#stream%28masked%3D%3Cspanclass%3D%22n%22%3Efalse%3C%2Fspan%3E%2Cbinary%3D%3Cspanclass%3D%22n%22%3Etrue%3C%2Fspan%3E%2Cframe_size%3D%3Cspanclass%3D%22n%22%3E1024%3C%2Fspan%3E%2C%26block%29-instance-method" class="signature"><strong>#stream</strong>(masked = <span class="n">false</span>, binary = <span class="n">true</span>, frame_size = <span class="n">1024</span>, &amp;block)</a>
        
      </li>
    
  </ul>





<div class="methods-inherited">
  
    

  <h3>Instance methods inherited from class <code><a href="../Reference.html">Reference</a></code>
</h3>
  
    <a href="../Reference.html#%21-instance-method" class="tooltip">
      <span>!</span>
    !</a>, 
  
    <a href="../Reference.html#%3D%3D%28other%29-instance-method" class="tooltip">
      <span>==(other)<br/>==(other : self)</span>
    ==</a>, 
  
    <a href="../Reference.html#hash-instance-method" class="tooltip">
      <span>hash</span>
    hash</a>, 
  
    <a href="../Reference.html#inspect%28io%3AIO%29%3ANil-instance-method" class="tooltip">
      <span>inspect(io : IO) : Nil</span>
    inspect</a>, 
  
    <a href="../Reference.html#nil%3F-instance-method" class="tooltip">
      <span>nil?</span>
    nil?</a>, 
  
    <a href="../Reference.html#object_id-instance-method" class="tooltip">
      <span>object_id</span>
    object_id</a>, 
  
    <a href="../Reference.html#same%3F%28other%3ANil%29-instance-method" class="tooltip">
      <span>same?(other : Nil)<br/>same?(other : Reference)</span>
    same?</a>, 
  
    <a href="../Reference.html#to_s%28io%3AIO%29%3ANil-instance-method" class="tooltip">
      <span>to_s(io : IO) : Nil</span>
    to_s</a>
  


    


  
    

  <h3>Instance methods inherited from class <code><a href="../Object.html">Object</a></code>
</h3>
  
    <a href="../Object.html#%21-instance-method" class="tooltip">
      <span>!</span>
    !</a>, 
  
    <a href="../Object.html#%21%3D%28other%29-instance-method" class="tooltip">
      <span>!=(other)</span>
    !=</a>, 
  
    <a href="../Object.html#%21%7E%28other%29-instance-method" class="tooltip">
      <span>!~(other)</span>
    !~</a>, 
  
    <a href="../Object.html#%3D%3D%28other%29-instance-method" class="tooltip">
      <span>==(other)</span>
    ==</a>, 
  
    <a href="../Object.html#%3D%3D%3D%28other%29-instance-method" class="tooltip">
      <span>===(other)</span>
    ===</a>, 
  
    <a href="../Object.html#%3D%7E%28other%29-instance-method" class="tooltip">
      <span>=~(other)</span>
    =~</a>, 
  
    <a href="../Object.html#class-instance-method" class="tooltip">
      <span>class</span>
    class</a>, 
  
    <a href="../Object.html#clone-instance-method" class="tooltip">
      <span>clone</span>
    clone</a>, 
  
    <a href="../Object.html#crystal_type_id-instance-method" class="tooltip">
      <span>crystal_type_id</span>
    crystal_type_id</a>, 
  
    <a href="../Object.html#dup-instance-method" class="tooltip">
      <span>dup</span>
    dup</a>, 
  
    <a href="../Object.html#hash-instance-method" class="tooltip">
      <span>hash</span>
    hash</a>, 
  
    <a href="../Object.html#inspect-instance-method" class="tooltip">
      <span>inspect<br/>inspect(io : IO)</span>
    inspect</a>, 
  
    <a href="../Object.html#itself-instance-method" class="tooltip">
      <span>itself</span>
    itself</a>, 
  
    <a href="../Object.html#not_nil%21-instance-method" class="tooltip">
      <span>not_nil!</span>
    not_nil!</a>, 
  
    <a href="../Object.html#tap%28%26block%29-instance-method" class="tooltip">
      <span>tap(&amp;block)</span>
    tap</a>, 
  
    <a href="../Object.html#to_json-instance-method" class="tooltip">
      <span>to_json</span>
    to_json</a>, 
  
    <a href="../Object.html#to_pretty_json%28io%3AIO%29-instance-method" class="tooltip">
      <span>to_pretty_json(io : IO)<br/>to_pretty_json</span>
    to_pretty_json</a>, 
  
    <a href="../Object.html#to_s-instance-method" class="tooltip">
      <span>to_s<br/>to_s(io : IO)</span>
    to_s</a>, 
  
    <a href="../Object.html#to_yaml%28io%3AIO%29-instance-method" class="tooltip">
      <span>to_yaml(io : IO)<br/>to_yaml</span>
    to_yaml</a>, 
  
    <a href="../Object.html#try%28%26block%29-instance-method" class="tooltip">
      <span>try(&amp;block)</span>
    try</a>
  


    

  <h3>Class methods inherited from class <code><a href="../Object.html">Object</a></code>
</h3>
  
    <a href="../Object.html#%3D%3D%28other%3AClass%29-class-method" class="tooltip">
      <span>==(other : Class)</span>
    ==</a>, 
  
    <a href="../Object.html#%3D%3D%3D%28other%29-class-method" class="tooltip">
      <span>===(other)</span>
    ===</a>, 
  
    <a href="../Object.html#cast%28other%29%3Aself-class-method" class="tooltip">
      <span>cast(other) : self</span>
    cast</a>, 
  
    <a href="../Object.html#from_json%28string_or_io%29-class-method" class="tooltip">
      <span>from_json(string_or_io)</span>
    from_json</a>, 
  
    <a href="../Object.html#from_yaml%28string%3AString%29-class-method" class="tooltip">
      <span>from_yaml(string : String)</span>
    from_yaml</a>, 
  
    <a href="../Object.html#hash-class-method" class="tooltip">
      <span>hash</span>
    hash</a>, 
  
    <a href="../Object.html#inspect%28io%29-class-method" class="tooltip">
      <span>inspect(io)</span>
    inspect</a>, 
  
    <a href="../Object.html#name%3AString-class-method" class="tooltip">
      <span>name : String</span>
    name</a>, 
  
    <a href="../Object.html#to_s%28io%29-class-method" class="tooltip">
      <span>to_s(io)</span>
    to_s</a>
  


  
</div>


  <h2>Class Method Detail</h2>
  
    <div class="entry-detail" id="open(uri:URI|String)-class-method">
      <a class="dashingAutolink" name="autolink-1451"></a><a class="dashAnchor" name="//apple_ref/cpp/Method/def%20self.open%28uri%20%3A%20URI%20%7C%20String%29"></a><div class="signature">
        
        def self.<strong>open</strong>(uri : <a href="../URI.html">URI</a> | <a href="../String.html">String</a>)

        
      </div>
      
        <div class="doc">
<p>Opens a new websocket using the information provided by the URI. This will also handle the handshake
and will raise an exception if the handshake did not complete successfully. This method will also raise
an exception if the URI is missing the host and/or the path.</p>

<p>Please note that the scheme will only be used to identify if SSL should be used or not. Therefore, schemes
apart from <code>wss</code> and <code>https</code> will be treated as the default which is <code>ws</code>.</p>

<pre><code><span class="t">WebSocket</span>.open(<span class="t">URI</span>.parse(<span class="s">&#34;ws://websocket.example.com/chat&#34;</span>))        <span class="c"># Creates a new WebSocket to `websocket.example.com`</span>
<span class="t">WebSocket</span>.open(<span class="t">URI</span>.parse(<span class="s">&#34;wss://websocket.example.com/chat&#34;</span>))       <span class="c"># Creates a new WebSocket with SSL to `websocket.example.com`</span>
<span class="t">WebSocket</span>.open(<span class="t">URI</span>.parse(<span class="s">&#34;http://websocket.example.com:8080/chat&#34;</span>)) <span class="c"># Creates a new WebSocket to `websocket.example.com` on port `8080`</span></code></pre>
</div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/manastech/crystal/blob/f364e3ec252a7384e401b1d3b4b04e21d469a91f/src/http/web_socket.cr#L255" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="open(host,path,port=&lt;spanclass=&#34;n&#34;&gt;nil&lt;/span&gt;,ssl=&lt;spanclass=&#34;n&#34;&gt;false&lt;/span&gt;)-class-method">
      <a class="dashingAutolink" name="autolink-1452"></a><a class="dashAnchor" name="//apple_ref/cpp/Method/def%20self.open%28host%2C%20path%2C%20port%20%3D%20nil%2C%20ssl%20%3D%20false%29"></a><div class="signature">
        
        def self.<strong>open</strong>(host, path, port = <span class="n">nil</span>, ssl = <span class="n">false</span>)

        
      </div>
      
        <div class="doc">
<p>Opens a new websocket to the target host. This will also handle the handshake
and will raise an exception if the handshake did not complete successfully.</p>

<pre><code><span class="t">WebSocket</span>.open(<span class="s">&#34;websocket.example.com&#34;</span>, <span class="s">&#34;/chat&#34;</span>)             <span class="c"># Creates a new WebSocket to `websocket.example.com`</span>
<span class="t">WebSocket</span>.open(<span class="s">&#34;websocket.example.com&#34;</span>, <span class="s">&#34;/chat&#34;</span>, ssl <span class="o">=</span> <span class="n">true</span>) <span class="c"># Creates a new WebSocket with SSL to `ẁebsocket.example.com`</span></code></pre>
</div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/manastech/crystal/blob/f364e3ec252a7384e401b1d3b4b04e21d469a91f/src/http/web_socket.cr#L220" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="new(io)-class-method">
      <a class="dashingAutolink" name="autolink-1453"></a><a class="dashAnchor" name="//apple_ref/cpp/Method/def%20self.new%28io%29"></a><div class="signature">
        
        def self.<strong>new</strong>(io)

        
      </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/manastech/crystal/blob/f364e3ec252a7384e401b1d3b4b04e21d469a91f/src/http/web_socket.cr#L30" target="_blank">View source</a>]
        
      </div>
    </div>
  



  <h2>Instance Method Detail</h2>
  
    <div class="entry-detail" id="close-instance-method">
      <a class="dashingAutolink" name="autolink-1454"></a><a class="dashAnchor" name="//apple_ref/cpp/Method/def%20close"></a><div class="signature">
        
        def <strong>close</strong>

        
      </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/manastech/crystal/blob/f364e3ec252a7384e401b1d3b4b04e21d469a91f/src/http/web_socket.cr#L210" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="receive(buffer:Slice(UInt8))-instance-method">
      <a class="dashingAutolink" name="autolink-1455"></a><a class="dashAnchor" name="//apple_ref/cpp/Method/def%20receive%28buffer%20%3A%20Slice%28UInt8%29%29"></a><div class="signature">
        
        def <strong>receive</strong>(buffer : <a href="../Slice.html">Slice</a>(<a href="../UInt8.html">UInt8</a>))

        
      </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/manastech/crystal/blob/f364e3ec252a7384e401b1d3b4b04e21d469a91f/src/http/web_socket.cr#L100" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="send(data:Slice(UInt8),masked=&lt;spanclass=&#34;n&#34;&gt;false&lt;/span&gt;)-instance-method">
      <a class="dashingAutolink" name="autolink-1456"></a><a class="dashAnchor" name="//apple_ref/cpp/Method/def%20send%28data%20%3A%20Slice%28UInt8%29%2C%20masked%20%3D%20false%29"></a><div class="signature">
        
        def <strong>send</strong>(data : <a href="../Slice.html">Slice</a>(<a href="../UInt8.html">UInt8</a>), masked = <span class="n">false</span>)

        
      </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/manastech/crystal/blob/f364e3ec252a7384e401b1d3b4b04e21d469a91f/src/http/web_socket.cr#L84" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="send(data:String,masked=&lt;spanclass=&#34;n&#34;&gt;false&lt;/span&gt;)-instance-method">
      <a class="dashingAutolink" name="autolink-1457"></a><a class="dashAnchor" name="//apple_ref/cpp/Method/def%20send%28data%20%3A%20String%2C%20masked%20%3D%20false%29"></a><div class="signature">
        
        def <strong>send</strong>(data : <a href="../String.html">String</a>, masked = <span class="n">false</span>)

        
      </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/manastech/crystal/blob/f364e3ec252a7384e401b1d3b4b04e21d469a91f/src/http/web_socket.cr#L80" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="send(data:Slice(UInt8),opcode:Opcode,masked=&lt;spanclass=&#34;n&#34;&gt;false&lt;/span&gt;,flags=&lt;spanclass=&#34;t&#34;&gt;Flags&lt;/span&gt;&lt;spanclass=&#34;t&#34;&gt;::&lt;/span&gt;&lt;spanclass=&#34;t&#34;&gt;FINAL&lt;/span&gt;,flush=&lt;spanclass=&#34;n&#34;&gt;true&lt;/span&gt;)-instance-method">
      <a class="dashingAutolink" name="autolink-1458"></a><a class="dashAnchor" name="//apple_ref/cpp/Method/def%20send%28data%20%3A%20Slice%28UInt8%29%2C%20opcode%20%3A%20Opcode%2C%20masked%20%3D%20false%2C%20flags%20%3D%20Flags%3A%3AFINAL%2C%20flush%20%3D%20true%29"></a><div class="signature">
        
        def <strong>send</strong>(data : <a href="../Slice.html">Slice</a>(<a href="../UInt8.html">UInt8</a>), opcode : <a href="../HTTP/WebSocket/Opcode.html">Opcode</a>, masked = <span class="n">false</span>, flags = <span class="t">Flags</span><span class="t">::</span><span class="t">FINAL</span>, flush = <span class="n">true</span>)

        
      </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/manastech/crystal/blob/f364e3ec252a7384e401b1d3b4b04e21d469a91f/src/http/web_socket.cr#L94" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="stream(masked=&lt;spanclass=&#34;n&#34;&gt;false&lt;/span&gt;,binary=&lt;spanclass=&#34;n&#34;&gt;true&lt;/span&gt;,frame_size=&lt;spanclass=&#34;n&#34;&gt;1024&lt;/span&gt;,&amp;block)-instance-method">
      <a class="dashingAutolink" name="autolink-1459"></a><a class="dashAnchor" name="//apple_ref/cpp/Method/def%20stream%28masked%20%3D%20false%2C%20binary%20%3D%20true%2C%20frame_size%20%3D%201024%2C%20%26block%29"></a><div class="signature">
        
        def <strong>stream</strong>(masked = <span class="n">false</span>, binary = <span class="n">true</span>, frame_size = <span class="n">1024</span>, &amp;block)

        
      </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/manastech/crystal/blob/f364e3ec252a7384e401b1d3b4b04e21d469a91f/src/http/web_socket.cr#L88" target="_blank">View source</a>]
        
      </div>
    </div>
  




</div>



</body></html>