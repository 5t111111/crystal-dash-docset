<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <meta charset="utf-8"/>
  <meta id="repository-name" content="github.com/crystal-lang/crystal"/>
  <link href="../../css/style.css" rel="stylesheet" type="text/css"/>
  
  <a class="dashingAutolink" name="autolink-1970"></a><a class="dashAnchor" name="//apple_ref/cpp/Class/Float%3A%3APrinter%3A%3ADiyFP%20-%20github.com%2Fcrystal-lang%2Fcrystal"></a><title>Float::Printer::DiyFP - github.com/crystal-lang/crystal</title>
</head>
<body>



<div id="main-content">
<h1 class="type-name">

  <span class="kind">struct</span> Float::Printer::DiyFP

</h1>


  <ul class="superclass-hierarchy">
<li class="superclass"><a href="../../Float/Printer/DiyFP.html">Float::Printer::DiyFP</a></li>
<li class="superclass"><a href="../../Struct.html">Struct</a></li>
<li class="superclass"><a href="../../Value.html">Value</a></li>
<li class="superclass"><a href="../../Object.html">Object</a></li>
</ul>




  <h2>Overview</h2>

  <p>This &#34;Do It Yourself Floating Point&#34; struct implements a floating-point number
with a <code>UIht64</code> significand and an <code><a href="../../Int32.html">Int32</a></code> exponent. Normalized DiyFP numbers will
have the most significant bit of the significand set.
Multiplication and Subtraction do not normalize their results.
DiyFP is not designed to contain special Floats (NaN and Infinity).</p>














  <h2>Defined in:</h2>
  
    
      <a href="https://github.com/crystal-lang/crystal/blob/3c3d3e2b830e81de0aa39b7af0cd6f82f759c410/src/float/printer/diy_fp.cr#L37" target="_blank">float/printer/diy_fp.cr</a>
    
    <br/>
  



  
    <h2>Constant Summary</h2>
  
  <dl>
    
      <dt class="entry-const" id="MASK32">
        <strong>MASK32</strong> = <code><span class="n">4294967295_u32</span></code>
      </dt>
      
    
      <dt class="entry-const" id="SIGNIFICAND_SIZE">
        <strong>SIGNIFICAND_SIZE</strong> = <code><span class="n">64</span></code>
      </dt>
      
    
  </dl>



  <h2>Constructors</h2>
  <ul class="list-summary">
    
      <li class="entry-summary">
        <a href="#new%28frac%2Cexp%3AInt16%29-class-method" class="signature"><strong>.new</strong>(frac, exp : Int16)</a>
        
      </li>
    
      <li class="entry-summary">
        <a href="#new%28frac%2Cexp%29-class-method" class="signature"><strong>.new</strong>(frac, exp)</a>
        
      </li>
    
  </ul>



  <h2>Class Method Summary</h2>
  <ul class="list-summary">
    
      <li class="entry-summary">
        <a href="#from_f%28d%3AFloat64%7CFloat32%29-class-method" class="signature"><strong>.from_f</strong>(d : Float64 | Float32)</a>
        
      </li>
    
      <li class="entry-summary">
        <a href="#from_f_normalized%28v%3AFloat64%7CFloat32%29-class-method" class="signature"><strong>.from_f_normalized</strong>(v : Float64 | Float32)</a>
        
          <div class="summary"><p>Normalize such that the most signficiant bit of frac is set</p></div>
        
      </li>
    
  </ul>



  <h2>Instance Method Summary</h2>
  <ul class="list-summary">
    
      <li class="entry-summary">
        <a href="#%2A%28other%3ADiyFP%29-instance-method" class="signature"><strong>#*</strong>(other : DiyFP)</a>
        
          <div class="summary"><p>Returns a new <code><a href="../../Float/Printer/DiyFP.html">DiyFP</a></code> caculated as self * <em>other</em>.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#-%28other%3ADiyFP%29-instance-method" class="signature"><strong>#-</strong>(other : DiyFP)</a>
        
          <div class="summary"><p>Returns a new <code><a href="../../Float/Printer/DiyFP.html">DiyFP</a></code> caculated as self - <em>other</em>.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#exp%3AInt32-instance-method" class="signature"><strong>#exp</strong> : Int32</a>
        
          <div class="summary"><p>exponent</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#exp%3D%28exp%3AInt32%29-instance-method" class="signature"><strong>#exp=</strong>(exp : Int32)</a>
        
          <div class="summary"><p>exponent</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#frac%3AUInt64-instance-method" class="signature"><strong>#frac</strong> : UInt64</a>
        
          <div class="summary"><p>Also known as the significand</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#frac%3D%28frac%3AUInt64%29-instance-method" class="signature"><strong>#frac=</strong>(frac : UInt64)</a>
        
          <div class="summary"><p>Also known as the significand</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#new%28frac%3AInt32%2Cexp%29-instance-method" class="signature"><strong>#new</strong>(frac : Int32, exp)</a>
        
      </li>
    
      <li class="entry-summary">
        <a href="#normalize-instance-method" class="signature"><strong>#normalize</strong></a>
        
      </li>
    
  </ul>





<div class="methods-inherited">
  
    

  <h3>Instance methods inherited from struct <code><a href="../../Struct.html">Struct</a></code>
</h3>
  
  
    <a href="../../Struct.html#%3D%3D%28other%3Aself%29%3ABool-instance-method" class="tooltip">
      <span>==(other : self) : Bool</span>
    ==</a>, 
    
  
    <a href="../../Struct.html#hash%3AInt32-instance-method" class="tooltip">
      <span>hash : Int32</span>
    hash</a>, 
    
  
    <a href="../../Struct.html#inspect%28io%3AIO%29%3ANil-instance-method" class="tooltip">
      <span>inspect(io : IO) : Nil</span>
    inspect</a>, 
    
  
    <a href="../../Struct.html#pretty_print%28pp%29%3ANil-instance-method" class="tooltip">
      <span>pretty_print(pp) : Nil</span>
    pretty_print</a>, 
    
  
    <a href="../../Struct.html#to_s%28io%29-instance-method" class="tooltip">
      <span>to_s(io)</span>
    to_s</a>
    
  


    


    


  
    

  <h3>Instance methods inherited from struct <code><a href="../../Value.html">Value</a></code>
</h3>
  
  
    <a href="../../Value.html#%3D%3D%28other%29-instance-method" class="tooltip">
      <span>==(other)</span>
    ==</a>, 
    
  
    <a href="../../Value.html#dup-instance-method" class="tooltip">
      <span>dup</span>
    dup</a>
    
  


    


    


  
    

  <h3>Instance methods inherited from class <code><a href="../../Object.html">Object</a></code>
</h3>
  
  
    <a href="../../Object.html#%21%3D%28other%29-instance-method" class="tooltip">
      <span>!=(other)</span>
    !=</a>, 
    
  
    <a href="../../Object.html#%21~%28other%29-instance-method" class="tooltip">
      <span>!~(other)</span>
    !~</a>, 
    
  
    <a href="../../Object.html#%3D%3D%28other%29-instance-method" class="tooltip">
      <span>==(other)</span>
    ==</a>, 
    
  
    <a href="../../Object.html#%3D%3D%3D%28other%3AJSON%3A%3AAny%29-instance-method" class="tooltip">
      <span>===(other : JSON::Any)<br/>===(other : YAML::Any)<br/>===(other)</span>
    ===</a>, 
    
  
    <a href="../../Object.html#%3D~%28other%29-instance-method" class="tooltip">
      <span>=~(other)</span>
    =~</a>, 
    
  
    <a href="../../Object.html#class-instance-method" class="tooltip">
      <span>class</span>
    class</a>, 
    
  
    <a href="../../Object.html#dup-instance-method" class="tooltip">
      <span>dup</span>
    dup</a>, 
    
  
    <a href="../../Object.html#hash-instance-method" class="tooltip">
      <span>hash</span>
    hash</a>, 
    
  
    <a href="../../Object.html#inspect%28io%3AIO%29-instance-method" class="tooltip">
      <span>inspect(io : IO)<br/>inspect</span>
    inspect</a>, 
    
  
    <a href="../../Object.html#itself-instance-method" class="tooltip">
      <span>itself</span>
    itself</a>, 
    
  
    <a href="../../Object.html#not_nil%21-instance-method" class="tooltip">
      <span>not_nil!</span>
    not_nil!</a>, 
    
  
    <a href="../../Object.html#pretty_inspect%28width%3D79%2Cnewline%3D%26quot%3B%5Cn%26quot%3B%2Cindent%3D0%29%3AString-instance-method" class="tooltip">
      <span>pretty_inspect(width = <span class="n">79</span>, newline = <span class="s">&#34;\n&#34;</span>, indent = <span class="n">0</span>) : String</span>
    pretty_inspect</a>, 
    
  
    <a href="../../Object.html#pretty_print%28pp%3APrettyPrint%29%3ANil-instance-method" class="tooltip">
      <span>pretty_print(pp : PrettyPrint) : Nil</span>
    pretty_print</a>, 
    
  
    <a href="../../Object.html#tap%28%26block%29-instance-method" class="tooltip">
      <span>tap(&amp;block)</span>
    tap</a>, 
    
  
    <a href="../../Object.html#to_json%28io%3AIO%29-instance-method" class="tooltip">
      <span>to_json(io : IO)<br/>to_json</span>
    to_json</a>, 
    
  
    <a href="../../Object.html#to_pretty_json%28indent%3AString%3D%26quot%3B%26quot%3B%29-instance-method" class="tooltip">
      <span>to_pretty_json(indent : String = <span class="s">&#34;  &#34;</span>)<br/>to_pretty_json(io : IO, indent : String = <span class="s">&#34;  &#34;</span>)</span>
    to_pretty_json</a>, 
    
  
    <a href="../../Object.html#to_s-instance-method" class="tooltip">
      <span>to_s<br/>to_s(io : IO)</span>
    to_s</a>, 
    
  
    <a href="../../Object.html#to_yaml%28io%3AIO%29-instance-method" class="tooltip">
      <span>to_yaml(io : IO)<br/>to_yaml</span>
    to_yaml</a>, 
    
  
    <a href="../../Object.html#try%28%26block%29-instance-method" class="tooltip">
      <span>try(&amp;block)</span>
    try</a>, 
    
  
    <a href="../../Object.html#unsafe_as%28type%3AT.class%29forallT-instance-method" class="tooltip">
      <span>unsafe_as(type : T.class) forall T</span>
    unsafe_as</a>
    
  


    

  <h3>Constructor methods inherited from class <code><a href="../../Object.html">Object</a></code>
</h3>
  
  
    <a href="../../Object.html#from_json%28string_or_io%2Croot%3AString%29%3Aself-class-method" class="tooltip">
      <span>from_json(string_or_io, root : String) : self<br/>from_json(string_or_io) : self</span>
    from_json</a>, 
    
  
    <a href="../../Object.html#from_yaml%28string_or_io%29%3Aself-class-method" class="tooltip">
      <span>from_yaml(string_or_io) : self</span>
    from_yaml</a>
    
  


    


  
</div>


  <h2>Constructor Detail</h2>
  
    <div class="entry-detail" id="new(frac,exp:Int16)-class-method">
      <a class="dashingAutolink" name="autolink-1971"></a><a class="dashAnchor" name="//apple_ref/cpp/Method/def%20self.new%28frac%2C%20exp%20%3A%20Int16%29"></a><div class="signature">
        
        def self.<strong>new</strong>(frac, exp : <a href="../../Int16.html">Int16</a>)

        
      </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/crystal-lang/crystal/blob/3c3d3e2b830e81de0aa39b7af0cd6f82f759c410/src/float/printer/diy_fp.cr#L47" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="new(frac,exp)-class-method">
      <a class="dashingAutolink" name="autolink-1972"></a><a class="dashAnchor" name="//apple_ref/cpp/Method/def%20self.new%28frac%2C%20exp%29"></a><div class="signature">
        
        def self.<strong>new</strong>(frac, exp)

        
      </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/crystal-lang/crystal/blob/3c3d3e2b830e81de0aa39b7af0cd6f82f759c410/src/float/printer/diy_fp.cr#L44" target="_blank">View source</a>]
        
      </div>
    </div>
  



  <h2>Class Method Detail</h2>
  
    <div class="entry-detail" id="from_f(d:Float64|Float32)-class-method">
      <a class="dashingAutolink" name="autolink-1973"></a><a class="dashAnchor" name="//apple_ref/cpp/Method/def%20self.from_f%28d%20%3A%20Float64%20%7C%20Float32%29"></a><div class="signature">
        
        def self.<strong>from_f</strong>(d : <a href="../../Float64.html">Float64</a> | <a href="../../Float32.html">Float32</a>)

        
      </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/crystal-lang/crystal/blob/3c3d3e2b830e81de0aa39b7af0cd6f82f759c410/src/float/printer/diy_fp.cr#L119" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="from_f_normalized(v:Float64|Float32)-class-method">
      <a class="dashingAutolink" name="autolink-1974"></a><a class="dashAnchor" name="//apple_ref/cpp/Method/def%20self.from_f_normalized%28v%20%3A%20Float64%20%7C%20Float32%29"></a><div class="signature">
        
        def self.<strong>from_f_normalized</strong>(v : <a href="../../Float64.html">Float64</a> | <a href="../../Float32.html">Float32</a>)

        
      </div>
      
        <div class="doc"><p>Normalize such that the most signficiant bit of frac is set</p></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/crystal-lang/crystal/blob/3c3d3e2b830e81de0aa39b7af0cd6f82f759c410/src/float/printer/diy_fp.cr#L126" target="_blank">View source</a>]
        
      </div>
    </div>
  



  <h2>Instance Method Detail</h2>
  
    <div class="entry-detail" id="*(other:DiyFP)-instance-method">
      <a class="dashingAutolink" name="autolink-1975"></a><a class="dashAnchor" name="//apple_ref/cpp/Method/def%20%2A%28other%20%3A%20DiyFP%29"></a><div class="signature">
        
        def <strong>*</strong>(other : <a href="../../Float/Printer/DiyFP.html">DiyFP</a>)

        
      </div>
      
        <div class="doc">
<p>Returns a new <code><a href="../../Float/Printer/DiyFP.html">DiyFP</a></code> caculated as self * <em>other</em>.</p>

<p>Simply &#34;emulates&#34; a 128 bit multiplication.
However: the resulting number only contains 64 bits. The least
significant 64 bits are only used for rounding the most significant 64
bits.</p>

<p>This result is not normalized.</p>
</div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/crystal-lang/crystal/blob/3c3d3e2b830e81de0aa39b7af0cd6f82f759c410/src/float/printer/diy_fp.cr#L76" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="-(other:DiyFP)-instance-method">
      <a class="dashingAutolink" name="autolink-1976"></a><a class="dashAnchor" name="//apple_ref/cpp/Method/def%20-%28other%20%3A%20DiyFP%29"></a><div class="signature">
        
        def <strong>-</strong>(other : <a href="../../Float/Printer/DiyFP.html">DiyFP</a>)

        
      </div>
      
        <div class="doc">
<p>Returns a new <code><a href="../../Float/Printer/DiyFP.html">DiyFP</a></code> caculated as self - <em>other</em>.</p>

<p>The exponents of both numbers must be the same and the frac of self must be
greater than the other.</p>

<p>This result is not normalized.</p>
</div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/crystal-lang/crystal/blob/3c3d3e2b830e81de0aa39b7af0cd6f82f759c410/src/float/printer/diy_fp.cr#L61" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="exp:Int32-instance-method">
      <a class="dashingAutolink" name="autolink-1977"></a><a class="dashAnchor" name="//apple_ref/cpp/Method/def%20exp%20%3A%20Int32"></a><div class="signature">
        
        def <strong>exp</strong> : <a href="../../Int32.html">Int32</a>

        
      </div>
      
        <div class="doc"><p>exponent</p></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/crystal-lang/crystal/blob/3c3d3e2b830e81de0aa39b7af0cd6f82f759c410/src/float/printer/diy_fp.cr#L42" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="exp=(exp:Int32)-instance-method">
      <a class="dashingAutolink" name="autolink-1978"></a><a class="dashAnchor" name="//apple_ref/cpp/Method/def%20exp%3D%28exp%20%3A%20Int32%29"></a><div class="signature">
        
        def <strong>exp=</strong>(exp : <a href="../../Int32.html">Int32</a>)

        
      </div>
      
        <div class="doc"><p>exponent</p></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/crystal-lang/crystal/blob/3c3d3e2b830e81de0aa39b7af0cd6f82f759c410/src/float/printer/diy_fp.cr#L42" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="frac:UInt64-instance-method">
      <a class="dashingAutolink" name="autolink-1979"></a><a class="dashAnchor" name="//apple_ref/cpp/Method/def%20frac%20%3A%20UInt64"></a><div class="signature">
        
        def <strong>frac</strong> : <a href="../../UInt64.html">UInt64</a>

        
      </div>
      
        <div class="doc"><p>Also known as the significand</p></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/crystal-lang/crystal/blob/3c3d3e2b830e81de0aa39b7af0cd6f82f759c410/src/float/printer/diy_fp.cr#L40" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="frac=(frac:UInt64)-instance-method">
      <a class="dashingAutolink" name="autolink-1980"></a><a class="dashAnchor" name="//apple_ref/cpp/Method/def%20frac%3D%28frac%20%3A%20UInt64%29"></a><div class="signature">
        
        def <strong>frac=</strong>(frac : <a href="../../UInt64.html">UInt64</a>)

        
      </div>
      
        <div class="doc"><p>Also known as the significand</p></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/crystal-lang/crystal/blob/3c3d3e2b830e81de0aa39b7af0cd6f82f759c410/src/float/printer/diy_fp.cr#L40" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="new(frac:Int32,exp)-instance-method">
      <a class="dashingAutolink" name="autolink-1981"></a><a class="dashAnchor" name="//apple_ref/cpp/Method/def%20new%28frac%20%3A%20Int32%2C%20exp%29"></a><div class="signature">
        
        def <strong>new</strong>(frac : <a href="../../Int32.html">Int32</a>, exp)

        
      </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/crystal-lang/crystal/blob/3c3d3e2b830e81de0aa39b7af0cd6f82f759c410/src/float/printer/diy_fp.cr#L51" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="normalize-instance-method">
      <a class="dashingAutolink" name="autolink-1982"></a><a class="dashAnchor" name="//apple_ref/cpp/Method/def%20normalize"></a><div class="signature">
        
        def <strong>normalize</strong>

        
      </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/crystal-lang/crystal/blob/3c3d3e2b830e81de0aa39b7af0cd6f82f759c410/src/float/printer/diy_fp.cr#L95" target="_blank">View source</a>]
        
      </div>
    </div>
  




</div>



</body></html>