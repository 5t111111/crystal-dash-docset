<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta charset="utf-8">
  <meta id="repository-name" content="github.com/manastech/crystal">
  <link href="css/style.css" rel="stylesheet" type="text/css">
  
  <title>ECR</title>
</head>
<body>



<div id="main-content">
<h1 class="type-name">

  <span class="kind">module</span> ECR

</h1>





  <h2>Overview</h2>

  <p>Embedded Crystal (ECR) is a template language for embedding Crystal code into other text, 
that includes but is not limited to HTML. The template is read and transformed 
at compile time and then embedded into the binary.</p>

<p>There are <code></code> and <code></code> syntax. The former will render returned values.
The latter will not, but instead serve to control the structure as we do in normal Crystal.</p>

<p>Quick Example:</p>

<pre><code><span class="k">require</span> <span class="s">"ecr"</span>

<span class="k">class</span> <span class="t">Greeting</span>
  <span class="k">def</span> <span class="m">initialize</span>(@name)
  <span class="k">end</span>
  ecr_file <span class="s">"greeting.ecr"</span>
<span class="k">end</span>

<span class="c"># greeting.ecr</span>
<span class="t">Greeting</span>, <span class="o">%= @name <span class="o">%</span><span class="o">&gt;</span><span class="o">!</span>

<span class="t">Greeting</span>.<span class="k">new</span>(<span class="s">"John"</span>)
<span class="c">#=&gt; Greeting, John!</span></span></code></pre>

<p>Using logical statements:</p>

<pre><code><span class="c"># greeing.ecr</span>
<span class="o"><span class="o">%</span> <span class="k">if</span> @name <span class="o">%</span><span class="o">&gt;</span>
  <span class="t">Greeting</span>, <span class="o">%= @name <span class="o">%</span><span class="o">&gt;</span><span class="o">!</span>
<span class="o"><span class="o">%</span> <span class="k">else</span> <span class="o">%</span><span class="o">&gt;</span>
  <span class="t">Greeting</span><span class="o">!</span>
<span class="o"><span class="o">%</span> <span class="k">end</span> <span class="o">%</span><span class="o">&gt;</span>

<span class="t">Greeting</span>.<span class="k">new</span>(<span class="n">nil</span>)
<span class="c">#=&gt; Greeting!</span></span></span></span></span></code></pre>

<p>Using loops:</p>

<pre><code><span class="k">class</span> <span class="t">Greeting</span>
  <span class="k">def</span> <span class="m">initialize</span>(<span class="o">*</span>names)
   @names <span class="o">=</span> names
  <span class="k">end</span>
  ecr_file <span class="s">"greeting.ecr"</span>
<span class="k">end</span>

<span class="c"># greeting.ecr</span>
<span class="o"><span class="o">%</span> @names.each <span class="k">do</span> <span class="o">|</span>name<span class="o">|</span> <span class="o">%</span><span class="o">&gt;</span>
  <span class="t">Hi</span>, <span class="o">%= name <span class="o">%</span><span class="o">&gt;</span><span class="o">!</span>
<span class="o"><span class="o">%</span> <span class="k">end</span> <span class="o">%</span><span class="o">&gt;</span>

<span class="t">Greeting</span>.<span class="k">new</span>(<span class="s">"John"</span>,<span class="s">"Zoe"</span>,<span class="s">"Ben"</span>)
<span class="c">#=&gt; Hi, John!</span>
<span class="c">#=&gt; Hi, Zoe!</span>
<span class="c">#=&gt; Hi, Ben!</span></span></span></span></code></pre>

<p>Likewise, other Crystal logic can be implemented in ECR text.</p>







  <h2>Extended Modules</h2>
  <ul class="other-types-list">
  
    <li class="other-type"><a href="ECR.html">ECR</a></li>
  
  </ul>








  <h2>Defined in:</h2>
  
    
      <a href="https://github.com/manastech/crystal/blob/b3b1223108806f31fdb29cca6110a5d11d82f504/src/ecr/ecr.cr" target="_blank">ecr/ecr.cr</a>
    
    <br>
  



  
    <h2>Constant Summary</h2>
  
  <dl>
    
      <dt class="entry-const">
        <strong>DefaultBufferName</strong> = <code><span class="s">"__str__"</span></code>
      </dt>
      
    
  </dl>





  <h2>Instance Method Summary</h2>
  <ul class="list-summary">
    
      <li class="entry-summary">
        <a href="#process_file%28filename%2Cbuffer_name%3D%3Cspanclass%3D%22t%22%3EDefaultBufferName%3C%2Fspan%3E%29-instance-method" class="signature"><strong>#process_file</strong>(filename, buffer_name = <span class="t">DefaultBufferName</span>)</a>
        
      </li>
    
      <li class="entry-summary">
        <a href="#process_string%28string%2Cfilename%2Cbuffer_name%3D%3Cspanclass%3D%22t%22%3EDefaultBufferName%3C%2Fspan%3E%29-instance-method" class="signature"><strong>#process_string</strong>(string, filename, buffer_name = <span class="t">DefaultBufferName</span>)</a>
        
      </li>
    
  </ul>





<div class="methods-inherited">
  
</div>




  <h2>Instance Method Detail</h2>
  
    <div class="entry-detail" id='process_file(filename,buffer_name=&lt;spanclass="t"&gt;DefaultBufferName&lt;/span&gt;)-instance-method'>
      <div class="signature">
        
        def <strong>process_file</strong>(filename, buffer_name = <span class="t">DefaultBufferName</span>)

        
      </div>
      
      <br>
      <div>
        
          [<a href="https://github.com/manastech/crystal/blob/b3b1223108806f31fdb29cca6110a5d11d82f504/src/ecr/ecr.cr#L61" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id='process_string(string,filename,buffer_name=&lt;spanclass="t"&gt;DefaultBufferName&lt;/span&gt;)-instance-method'>
      <div class="signature">
        
        def <strong>process_string</strong>(string, filename, buffer_name = <span class="t">DefaultBufferName</span>)

        
      </div>
      
      <br>
      <div>
        
          [<a href="https://github.com/manastech/crystal/blob/b3b1223108806f31fdb29cca6110a5d11d82f504/src/ecr/ecr.cr#L65" target="_blank">View source</a>]
        
      </div>
    </div>
  




</div>

</body>
</html>
